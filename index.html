<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Snake Game - Play Classic Snake Online</title>
  <meta name="description" content="Play the classic Snake game online for free! Enjoy a modern, responsive design with smooth controls on both PC and mobile.">
  <meta name="keywords" content="snake game, play snake, online snake, classic snake, browser game">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="canonical" href="/">
  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gradient-to-br from-blue-50 via-white to-gray-100 min-h-screen text-gray-900 font-sans flex flex-col">
  <header class="w-full bg-white/80 shadow-md sticky top-0 z-10">
    <div class="max-w-xl mx-auto px-4 py-4 flex items-center justify-between">
      <h1 class="text-3xl md:text-4xl font-bold text-blue-600 tracking-tight">Snake Game</h1>
      <span class="text-sm text-gray-500 hidden sm:inline">Play Classic Snake Online</span>
    </div>
  </header>
  <main class="flex-1 flex flex-col items-center justify-center px-4 py-8">
    <!-- 游戏介绍 -->
    <section class="mb-6 text-center max-w-lg">
      <h2 class="text-xl md:text-2xl font-semibold text-gray-800 mb-2">Enjoy the timeless fun of Snake!</h2>
      <p class="text-gray-700 mb-2">Control the snake, eat the food, and grow as long as you can. Challenge yourself and beat your high score!</p>
    </section>
    <!-- 分数显示 -->
    <div class="mb-4 text-lg text-blue-700 font-semibold" id="score">Score: 0</div>
    <!-- 游戏画布 -->
    <div class="relative mb-6">
      <canvas id="gameCanvas" width="320" height="320" class="bg-white rounded-lg shadow-lg border border-gray-200"></canvas>
      <!-- 移动端方向按钮 -->
      <div class="absolute inset-0 flex flex-col items-center justify-center pointer-events-none md:hidden">
        <div class="flex justify-center mb-2">
          <button onclick="changeDirection('up')" class="pointer-events-auto bg-blue-500 hover:bg-blue-600 text-white rounded-full w-12 h-12 flex items-center justify-center shadow-md mb-2"><svg xmlns='http://www.w3.org/2000/svg' class='h-6 w-6' fill='none' viewBox='0 0 24 24' stroke='currentColor'><path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M5 15l7-7 7 7'/></svg></button>
        </div>
        <div class="flex justify-center">
          <button onclick="changeDirection('left')" class="pointer-events-auto bg-blue-500 hover:bg-blue-600 text-white rounded-full w-12 h-12 flex items-center justify-center shadow-md mr-4"><svg xmlns='http://www.w3.org/2000/svg' class='h-6 w-6' fill='none' viewBox='0 0 24 24' stroke='currentColor'><path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M15 19l-7-7 7-7'/></svg></button>
          <button onclick="changeDirection('down')" class="pointer-events-auto bg-blue-500 hover:bg-blue-600 text-white rounded-full w-12 h-12 flex items-center justify-center shadow-md mx-2"><svg xmlns='http://www.w3.org/2000/svg' class='h-6 w-6' fill='none' viewBox='0 0 24 24' stroke='currentColor'><path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'/></svg></button>
          <button onclick="changeDirection('right')" class="pointer-events-auto bg-blue-500 hover:bg-blue-600 text-white rounded-full w-12 h-12 flex items-center justify-center shadow-md ml-4"><svg xmlns='http://www.w3.org/2000/svg' class='h-6 w-6' fill='none' viewBox='0 0 24 24' stroke='currentColor'><path stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M9 5l7 7-7 7'/></svg></button>
        </div>
      </div>
    </div>
    <!-- 游戏结束和重新开始 -->
    <div id="gameOver" class="hidden flex flex-col items-center mb-4">
      <div class="text-2xl text-red-600 font-bold mb-2">Game Over!</div>
      <button onclick="restartGame()" class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg font-semibold shadow">Restart</button>
    </div>
    <!-- 操作说明 -->
    <section class="mt-4 text-center max-w-lg">
      <h2 class="text-lg font-semibold text-gray-800 mb-1">How to Play</h2>
      <p class="text-gray-700 text-sm">Use arrow keys (PC) or the blue buttons (mobile) to control the snake. Eat the food to grow. Avoid hitting the walls or yourself!</p>
    </section>
  </main>
  <footer class="w-full bg-white/80 border-t border-gray-200 mt-8">
    <div class="max-w-xl mx-auto px-4 py-4 text-center text-gray-500 text-sm">
      &copy; 2024 Snake Game. All rights reserved.
    </div>
  </footer>
  <script>
    // 游戏参数
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    const gridSize = 16;
    const tileCount = 20;
    let snake = [{x: 10, y: 10}];
    let direction = {x: 1, y: 0};
    let nextDirection = {x: 1, y: 0};
    let food = {x: 5, y: 5};
    let score = 0;
    let gameInterval = null;
    let gameOver = false;

    function drawBoard() {
      ctx.fillStyle = '#f2f2f7';
      ctx.fillRect(0, 0, canvas.width, canvas.height);
    }

    function drawSnake() {
      ctx.fillStyle = '#007aff';
      snake.forEach((seg, idx) => {
        ctx.fillRect(seg.x * gridSize, seg.y * gridSize, gridSize-1, gridSize-1);
      });
    }

    function drawFood() {
      ctx.fillStyle = '#ff3b30';
      ctx.fillRect(food.x * gridSize, food.y * gridSize, gridSize-1, gridSize-1);
    }

    function moveSnake() {
      const head = {x: snake[0].x + direction.x, y: snake[0].y + direction.y};
      // 撞墙或撞自己
      if (
        head.x < 0 || head.x >= tileCount ||
        head.y < 0 || head.y >= tileCount ||
        snake.some(seg => seg.x === head.x && seg.y === head.y)
      ) {
        endGame();
        return;
      }
      snake.unshift(head);
      if (head.x === food.x && head.y === food.y) {
        score++;
        document.getElementById('score').textContent = 'Score: ' + score;
        placeFood();
      } else {
        snake.pop();
      }
    }

    function placeFood() {
      while (true) {
        food = {
          x: Math.floor(Math.random() * tileCount),
          y: Math.floor(Math.random() * tileCount)
        };
        if (!snake.some(seg => seg.x === food.x && seg.y === food.y)) break;
      }
    }

    function gameLoop() {
      if (gameOver) return;
      direction = nextDirection;
      moveSnake();
      drawBoard();
      drawSnake();
      drawFood();
    }

    function endGame() {
      clearInterval(gameInterval);
      gameOver = true;
      document.getElementById('gameOver').classList.remove('hidden');
    }

    function restartGame() {
      snake = [{x: 10, y: 10}];
      direction = {x: 1, y: 0};
      nextDirection = {x: 1, y: 0};
      score = 0;
      document.getElementById('score').textContent = 'Score: 0';
      placeFood();
      gameOver = false;
      document.getElementById('gameOver').classList.add('hidden');
      drawBoard();
      drawSnake();
      drawFood();
      clearInterval(gameInterval);
      gameInterval = setInterval(gameLoop, 100);
    }

    function changeDirection(dir) {
      let newDir;
      switch(dir) {
        case 'up': newDir = {x: 0, y: -1}; break;
        case 'down': newDir = {x: 0, y: 1}; break;
        case 'left': newDir = {x: -1, y: 0}; break;
        case 'right': newDir = {x: 1, y: 0}; break;
      }
      // 防止反向
      if (
        (direction.x + newDir.x === 0 && direction.y + newDir.y === 0)
      ) return;
      nextDirection = newDir;
    }

    // 键盘控制
    document.addEventListener('keydown', e => {
      switch(e.key) {
        case 'ArrowUp': changeDirection('up'); break;
        case 'ArrowDown': changeDirection('down'); break;
        case 'ArrowLeft': changeDirection('left'); break;
        case 'ArrowRight': changeDirection('right'); break;
      }
    });

    // 初始化
    restartGame();
  </script>
</body>
</html>
